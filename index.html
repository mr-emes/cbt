<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBT MIN Singkawang - Computer Based Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
        }
        
        .cbt-header {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .question-number {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 4px;
        }
        
        .question-number.unanswered {
            background: #f3f4f6;
            color: #6b7280;
            border: 2px solid #d1d5db;
        }
        
        .question-number.answered {
            background: #dcfce7;
            color: #166534;
            border: 2px solid #22c55e;
        }
        
        .question-number.current {
            background: #dbeafe;
            color: #1e40af;
            border: 2px solid #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .option-button {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        
        .option-button:hover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        
        .option-button.selected {
            border-color: #3b82f6;
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Modal Fixes */
        .modal-container {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            padding: 1rem;
        }
        
        .modal-content {
            background: white;
            border-radius: 0.5rem;
            width: 100%;
            max-width: 42rem;
            max-height: 90vh;
            overflow-y: auto;
            margin: auto;
        }
        
        .modal-header {
            padding: 1.5rem 1.5rem 0 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1rem;
        }
        
        .modal-body {
            padding: 0 1.5rem;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem 1.5rem 1.5rem;
            border-top: 1px solid #e5e7eb;
            background: white;
            position: sticky;
            bottom: 0;
            margin-top: 1rem;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .cbt-header {
                height: 60px;
                padding: 0.75rem 1rem;
            }
            
            .desktop-sidebar {
                display: none;
            }
            
            .mobile-content {
                padding-bottom: 80px;
            }
            
            .mobile-bottom-nav {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                border-top: 2px solid #e5e7eb;
                padding: 0.75rem;
                z-index: 50;
                box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
            }
            
            .mobile-nav-button {
                background: #3b82f6;
                color: white;
                border: none;
                border-radius: 12px;
                padding: 12px 16px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            }
            
            .mobile-nav-button:hover {
                background: #2563eb;
                transform: translateY(-1px);
            }
            
            .mobile-nav-button:active {
                transform: translateY(0);
            }
            
            .mobile-nav-popup {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                border-radius: 20px 20px 0 0;
                padding: 1.5rem;
                z-index: 60;
                transform: translateY(100%);
                transition: transform 0.3s ease;
                box-shadow: 0 -8px 25px rgba(0, 0, 0, 0.15);
                max-height: 70vh;
                overflow-y: auto;
            }
            
            .mobile-nav-popup.show {
                transform: translateY(0);
            }
            
            .mobile-nav-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 55;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .mobile-nav-overlay.show {
                opacity: 1;
                visibility: visible;
            }
            
            .mobile-question-grid {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 8px;
                margin-top: 1rem;
            }
            
            .mobile-question-btn {
                width: 44px;
                height: 44px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.2s ease;
                border: 2px solid;
            }
            
            .question-container-mobile {
                padding: 1rem;
            }
            
            .option-button-mobile {
                padding: 1rem;
                margin-bottom: 0.75rem;
                font-size: 0.9rem;
                line-height: 1.4;
                border-radius: 12px;
            }
            
            .modal-content {
                max-height: 95vh;
                margin: 0.5rem;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-bottom-nav,
            .mobile-nav-overlay,
            .mobile-nav-popup {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-green-600 to-green-800 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 text-center">
            <div class="bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg border-2 border-green-200 overflow-hidden">
                <img src="https://archive.org/download/logo-min-singkawang/logo%20min%20singkawang.jpg" alt="Logo MIN Singkawang" class="w-16 h-16 object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm" style="display: none;">MIN</div>
            </div>
            <h1 class="text-2xl font-bold text-gray-800 mb-2">CBT MIN SINGKAWANG</h1>
            <p class="text-gray-600 mb-4">Memuat sistem ujian...</p>
            <div class="loading-spinner mx-auto"></div>
            <p class="text-sm text-gray-500 mt-4" id="loadingStatus">Menghubungkan ke database...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="hidden min-h-screen flex items-center justify-center bg-gradient-to-br from-green-600 to-green-800">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg border-2 border-green-200 overflow-hidden">
                    <img src="https://archive.org/download/logo-min-singkawang/logo%20min%20singkawang.jpg" alt="Logo MIN Singkawang" class="w-16 h-16 object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm" style="display: none;">MIN</div>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">CBT MIN SINGKAWANG</h1>
                <p class="text-gray-600">Madrasah Ibtidaiyah Negeri Singkawang</p>
                <p class="text-sm text-gray-500 mt-2">Computer Based Test System</p>
            </div>
            
            <form onsubmit="handleSmartLogin(event)">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Username / NIS</label>
                        <input type="text" id="username" placeholder="Masukkan Username atau NIS" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="password" placeholder="Masukkan Password" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                        üöÄ Masuk Sistem
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- CBT Interface -->
    <div id="cbtInterface" class="hidden">
        <!-- Header -->
        <div class="cbt-header flex items-center justify-between px-4 md:px-6 text-white">
            <div class="flex items-center space-x-3">
                <div class="bg-white bg-opacity-20 p-1 rounded-lg overflow-hidden">
                    <img src="https://archive.org/download/logo-min-singkawang/logo%20min%20singkawang.jpg" alt="Logo MIN Singkawang" class="w-8 h-8 md:w-10 md:h-10 object-contain rounded-lg" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="w-8 h-8 md:w-10 md:h-10 bg-green-800 rounded-lg flex items-center justify-center text-white font-bold text-xs" style="display: none;">MIN</div>
                </div>
                <div class="hidden md:block">
                    <h1 class="text-xl font-bold">CBT MIN SINGKAWANG</h1>
                    <p class="text-sm opacity-90" id="examSubject">Matematika - Tingkat MI</p>
                </div>
                <div class="md:hidden">
                    <h1 class="text-lg font-bold">CBT MIN SINGKAWANG</h1>
                    <p class="text-xs opacity-90" id="examSubjectMobile">Ujian Matematika</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-3 md:space-x-6">
                <div class="hidden md:block text-right">
                    <p class="text-sm opacity-90">Peserta:</p>
                    <p class="font-semibold" id="participantName">Loading...</p>
                </div>
                <div class="bg-white bg-opacity-20 px-2 py-1 md:px-4 md:py-2 rounded-lg">
                    <p class="text-xs md:text-sm opacity-90 hidden md:block">Sisa Waktu:</p>
                    <p class="text-sm md:text-xl font-bold" id="timer">01:30:00</p>
                </div>
            </div>
        </div>

        <div class="flex">
            <!-- Desktop Question Navigation -->
            <div class="desktop-sidebar w-64 bg-white shadow-lg p-4 h-screen overflow-y-auto">
                <h3 class="font-semibold text-gray-800 mb-4">Navigasi Soal</h3>
                <div class="grid grid-cols-4 gap-1" id="questionNavigation">
                    <!-- Question numbers will be populated here -->
                </div>
                
                <div class="mt-6 space-y-3">
                    <div class="flex items-center space-x-2">
                        <div class="question-number unanswered">1</div>
                        <span class="text-sm text-gray-600">Belum dijawab</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="question-number answered">2</div>
                        <span class="text-sm text-gray-600">Sudah dijawab</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="question-number current">3</div>
                        <span class="text-sm text-gray-600">Sedang dikerjakan</span>
                    </div>
                </div>
            </div>

            <!-- Question Content -->
            <div class="flex-1 bg-white mobile-content">
                <div class="p-6 question-container-mobile" id="questionContainer">
                    <!-- Question content will be populated here -->
                </div>
            </div>

            <!-- Desktop Question Controls -->
            <div class="desktop-sidebar w-64 bg-gray-50 p-4">
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-lg border">
                        <h4 class="font-semibold text-gray-800 mb-2">Informasi Soal</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Soal ke:</span>
                                <span class="font-semibold" id="currentQuestionNumber">1</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Total soal:</span>
                                <span class="font-semibold" id="totalQuestionsDisplay">20</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Terjawab:</span>
                                <span class="font-semibold text-green-600" id="answeredCount">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex space-x-2">
                            <button onclick="previousQuestion()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
                                ‚Üê Sebelum
                            </button>
                            <button onclick="nextQuestion()" id="nextButton" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
                                Selanjutnya ‚Üí
                            </button>
                        </div>
                        
                        <button onclick="submitExam()" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
                            üèÅ Selesai Ujian
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Bottom Navigation -->
        <div class="mobile-bottom-nav md:hidden">
            <div class="flex items-center justify-between space-x-3">
                <button onclick="previousQuestion()" class="flex items-center space-x-2 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
                    <i class="fas fa-chevron-left"></i>
                    <span class="hidden sm:inline">Sebelum</span>
                </button>
                
                <button onclick="toggleMobileNav()" class="mobile-nav-button flex items-center space-x-2">
                    <i class="fas fa-th-large"></i>
                    <span>Soal <span id="currentQuestionNumberMobile">1</span>/<span id="totalQuestionsDisplayMobile">20</span></span>
                </button>
                
                <button onclick="nextQuestion()" id="nextButtonMobile" class="flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
                    <span class="hidden sm:inline">Selanjutnya</span>
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Overlay -->
        <div id="mobileNavOverlay" class="mobile-nav-overlay md:hidden" onclick="closeMobileNav()"></div>

        <!-- Mobile Navigation Popup -->
        <div id="mobileNavPopup" class="mobile-nav-popup md:hidden">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-800">
                    <i class="fas fa-list-ol mr-2"></i>Navigasi Soal
                </h3>
                <button onclick="closeMobileNav()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="bg-gray-50 p-3 rounded-lg mb-4">
                <div class="flex items-center justify-between text-sm">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-user text-blue-600"></i>
                        <span id="participantNameMobile">Loading...</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-check-circle text-green-600"></i>
                        <span>Terjawab: <span class="font-semibold" id="answeredCountMobile">0</span></span>
                    </div>
                </div>
            </div>
            
            <div class="mobile-question-grid" id="mobileQuestionGrid">
                <!-- Mobile question numbers will be populated here -->
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-200">
                <button onclick="submitExam()" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2">
                    <i class="fas fa-flag-checkered"></i>
                    <span>Selesai Ujian</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="hidden min-h-screen flex items-center justify-center bg-gradient-to-br from-green-600 to-green-800">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg text-center">
            <div class="bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg border-2 border-green-200 overflow-hidden">
                <img src="https://archive.org/download/logo-min-singkawang/logo%20min%20singkawang.jpg" alt="Logo MIN Singkawang" class="w-16 h-16 object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm" style="display: none;">MIN</div>
            </div>
            
            <h1 class="text-2xl font-bold text-gray-800 mb-2">Ujian Selesai!</h1>
            <p class="text-gray-600 mb-6">Terimakasih telah mengikuti ujian</p>
            
            <div class="bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-xl mb-6 border-2 border-green-200">
                <div class="text-center mb-4">
                    <div class="text-4xl font-bold text-green-600 mb-2" id="finalScore">0</div>
                    <div class="text-lg font-semibold text-gray-700">Nilai Akhir</div>
                    <div class="inline-block bg-green-600 text-white px-4 py-2 rounded-full text-xl font-bold mt-2" id="finalGrade">E</div>
                </div>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg mb-6">
                <h4 class="font-semibold mb-3 text-gray-800">üìä Detail Hasil:</h4>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div class="bg-white p-3 rounded-lg">
                        <div class="text-green-600 font-semibold text-lg" id="finalCorrect">0</div>
                        <div class="text-gray-600">Jawaban Benar</div>
                    </div>
                    <div class="bg-white p-3 rounded-lg">
                        <div class="text-red-600 font-semibold text-lg" id="finalIncorrect">0</div>
                        <div class="text-gray-600">Jawaban Salah</div>
                    </div>
                </div>
            </div>
            
            <button onclick="showScreen('loginScreen')" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors">
                üè† Kembali ke Halaman Login
            </button>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen bg-gray-100">
        <div class="bg-blue-600 text-white p-4 shadow-lg">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-800 rounded-lg flex items-center justify-center text-white font-bold text-xs overflow-hidden">
                        <img src="https://archive.org/download/logo-min-singkawang/logo%20min%20singkawang.jpg" alt="Logo MIN Singkawang" class="w-8 h-8 object-contain" onerror="this.style.display='none'; this.parentElement.innerHTML='MIN';">
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Admin CBT MIN SINGKAWANG</h1>
                        <p class="text-sm opacity-90">Panel Administrasi</p>
                    </div>
                </div>
                <button onclick="showScreen('loginScreen')" class="bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <div class="flex min-h-screen">
            <!-- Admin Sidebar -->
            <div class="w-64 bg-white shadow-lg min-h-screen overflow-y-auto">
                <div class="p-4">
                    <nav class="space-y-2">
                        <button onclick="showAdminSection('dashboard')" class="admin-nav-btn w-full text-left px-4 py-3 rounded-lg bg-blue-100 text-blue-800 font-medium flex items-center space-x-3">
                            <i class="fas fa-chart-bar"></i>
                            <span>Dashboard</span>
                        </button>
                        <button onclick="showAdminSection('students')" class="admin-nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 flex items-center space-x-3">
                            <i class="fas fa-users"></i>
                            <span>Kelola Peserta</span>
                        </button>
                        <button onclick="showAdminSection('questions')" class="admin-nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 flex items-center space-x-3">
                            <i class="fas fa-question-circle"></i>
                            <span>Kelola Soal</span>
                        </button>
                        <button onclick="showAdminSection('results')" class="admin-nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 flex items-center space-x-3">
                            <i class="fas fa-trophy"></i>
                            <span>Hasil Ujian</span>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Admin Content -->
            <div class="flex-1 p-6">
                <!-- Dashboard Section -->
                <div id="adminDashboardSection" class="admin-section">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Dashboard Admin</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center">
                                <div class="bg-blue-100 p-3 rounded-full">
                                    <i class="fas fa-users text-2xl text-blue-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">Total Siswa</p>
                                    <p class="text-2xl font-bold text-gray-800" id="totalStudents">5</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center">
                                <div class="bg-green-100 p-3 rounded-full">
                                    <i class="fas fa-question-circle text-2xl text-green-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">Total Soal</p>
                                    <p class="text-2xl font-bold text-gray-800" id="totalQuestions">20</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center">
                                <div class="bg-yellow-100 p-3 rounded-full">
                                    <i class="fas fa-clipboard-list text-2xl text-yellow-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">Ujian Aktif</p>
                                    <p class="text-2xl font-bold text-gray-800" id="activeExams">1</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center">
                                <div class="bg-purple-100 p-3 rounded-full">
                                    <i class="fas fa-trophy text-2xl text-purple-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">Rata-rata Nilai</p>
                                    <p class="text-2xl font-bold text-gray-800" id="averageScore">85</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Status Sistem CBT</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                                <span class="text-green-800">‚úÖ Sistem CBT</span>
                                <span class="text-green-600 font-semibold">Online</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                                <span class="text-blue-800">üìä Mode Demo</span>
                                <span class="text-blue-600 font-semibold">Aktif</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                                <span class="text-purple-800">üîß Versi Sistem</span>
                                <span class="text-purple-600 font-semibold">v1.0.0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Students Management Section -->
                <div id="adminStudentsSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Kelola Peserta</h2>
                        <button onclick="showAddStudentModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">
                            ‚ûï Tambah Siswa
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">NIS</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nama</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Kelas</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody" class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">123456</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ahmad Rizki</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">6A</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Aktif</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                                            <button class="text-blue-600 hover:text-blue-900">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Hapus</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">123457</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Siti Aminah</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">6A</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Aktif</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                                            <button class="text-blue-600 hover:text-blue-900">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Hapus</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">123458</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Budi Santoso</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">6B</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Aktif</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                                            <button class="text-blue-600 hover:text-blue-900">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Hapus</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Questions Management Section -->
                <div id="adminQuestionsSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Kelola Soal</h2>
                        <button onclick="showAddQuestionModal()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium">
                            ‚ûï Tambah Soal
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Soal</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Mata Pelajaran</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="questionsTableBody" class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1</td>
                                        <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">Jika 2x + 5 = 13, maka nilai x adalah...</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Matematika</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                                            <button class="text-blue-600 hover:text-blue-900">Lihat</button>
                                            <button class="text-green-600 hover:text-green-900">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Hapus</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2</td>
                                        <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">Hasil dari ‚àö64 + ‚àö36 adalah...</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Matematika</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                                            <button class="text-blue-600 hover:text-blue-900">Lihat</button>
                                            <button class="text-green-600 hover:text-green-900">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Hapus</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Results Management Section -->
                <div id="adminResultsSection" class="admin-section hidden">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Hasil Ujian</h2>
                    
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">NIS</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nama</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nilai</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Grade</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Benar</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Salah</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tanggal</th>
                                    </tr>
                                </thead>
                                <tbody id="resultsTableBody" class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">123456</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Ahmad Rizki</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold">85</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">B</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-green-600">17</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-red-600">3</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-01-15</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentQuestion = 1;
        let totalQuestions = 20;
        let timeRemaining = 90 * 60; // 90 minutes in seconds
        let timer = null;
        let answers = {};
        let currentStudent = null;
        let questions = [];
        let correctAnswers = {};

        // Initialize system on page load
        document.addEventListener('DOMContentLoaded', async function() {
            await initializeSystem();
        });

        async function initializeSystem() {
            try {
                updateLoadingStatus('Memuat data awal...');
                await initializeSampleData();
                updateLoadingStatus('Sistem siap digunakan!');
                
                setTimeout(() => {
                    hideLoadingScreen();
                }, 1000);
                
            } catch (error) {
                console.error('System initialization error:', error);
                updateLoadingStatus('Mode offline - menggunakan data lokal');
                
                setTimeout(() => {
                    hideLoadingScreen();
                }, 1500);
            }
        }

        async function initializeSampleData() {
            // Sample questions for demo
            questions = [
                {
                    id: 1,
                    question: "Jika 2x + 5 = 13, maka nilai x adalah...",
                    options: ["3", "4", "5", "6"],
                    correct: 1
                },
                {
                    id: 2,
                    question: "Hasil dari ‚àö64 + ‚àö36 adalah...",
                    options: ["10", "12", "14", "16"],
                    correct: 2
                },
                {
                    id: 3,
                    question: "Berapakah luas segitiga dengan alas 12 cm dan tinggi 8 cm?",
                    options: ["48 cm¬≤", "96 cm¬≤", "24 cm¬≤", "32 cm¬≤"],
                    correct: 0
                },
                {
                    id: 4,
                    question: "Jika a = 3 dan b = 4, maka nilai a¬≤ + b¬≤ adalah...",
                    options: ["25", "24", "23", "22"],
                    correct: 0
                },
                {
                    id: 5,
                    question: "Hasil dari 15 √ó 8 adalah...",
                    options: ["120", "125", "130", "135"],
                    correct: 0
                }
            ];
            
            // Add more questions to reach 20
            for (let i = 6; i <= 20; i++) {
                questions.push({
                    id: i,
                    question: `Hasil dari ${i + 5} √ó ${i - 3} adalah...`,
                    options: [
                        `${(i + 5) * (i - 3)}`, 
                        `${(i + 5) * (i - 3) + 5}`, 
                        `${(i + 5) * (i - 3) - 3}`, 
                        `${(i + 5) * (i - 3) + 10}`
                    ],
                    correct: 0
                });
            }
            
            totalQuestions = questions.length;
        }

        function updateLoadingStatus(message) {
            document.getElementById('loadingStatus').textContent = message;
        }

        function hideLoadingScreen() {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        // Login Functions
        async function handleSmartLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Check for admin login
            if (username.toLowerCase() === 'admin' && password === 'admin123') {
                showScreen('adminDashboard');
                await initializeAdminDashboard();
                return;
            }
            
            // Demo credentials
            const demoStudents = {
                '123456': { nisn: '123456', name: 'Ahmad Rizki', class: '6A', password: 'min2025' },
                '123457': { nisn: '123457', name: 'Siti Aminah', class: '6A', password: 'min2025' },
                '123458': { nisn: '123458', name: 'Budi Santoso', class: '6B', password: 'min2025' },
                '123459': { nisn: '123459', name: 'Fatimah zahra', class: '6A', password: 'min2025' },
                '123460': { nisn: '123460', name: 'Muhammad Iqbal', class: '6B', password: 'min2025' }
            };
            
            const demoStudent = demoStudents[username];
            if (demoStudent && demoStudent.password === password) {
                currentStudent = demoStudent;
                document.getElementById('participantName').textContent = demoStudent.name;
                document.getElementById('participantNameMobile').textContent = demoStudent.name;
                
                showScreen('cbtInterface');
                await initializeCBT();
                return;
            }
            
            Swal.fire({
                icon: 'error',
                title: 'Login Gagal',
                html: `
                    <p>Username atau Password salah!</p>
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <p class="font-semibold text-blue-800">Kredensial Siswa:</p>
                        <p class="text-blue-700">NIS: <strong>123456</strong></p>
                        <p class="text-blue-700">Password: <strong>min2025</strong></p>
                    </div>
                    <div class="mt-2 p-3 bg-green-50 rounded-lg">
                        <p class="font-semibold text-green-800">Kredensial Admin:</p>
                        <p class="text-green-700">Username: <strong>admin</strong></p>
                        <p class="text-green-700">Password: <strong>admin123</strong></p>
                    </div>
                `,
                confirmButtonColor: '#3b82f6'
            });
        }

        function showScreen(screenId) {
            const screens = ['loginScreen', 'cbtInterface', 'resultScreen', 'adminDashboard'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        // CBT Functions
        async function initializeCBT() {
            generateQuestionNavigation();
            loadQuestion(1);
            startTimer();
            updateStats();
        }

        function generateQuestionNavigation() {
            // Desktop navigation
            const nav = document.getElementById('questionNavigation');
            nav.innerHTML = '';
            
            // Mobile navigation
            const mobileGrid = document.getElementById('mobileQuestionGrid');
            mobileGrid.innerHTML = '';
            
            for (let i = 1; i <= totalQuestions; i++) {
                // Desktop button
                const btn = document.createElement('div');
                btn.className = `question-number ${i === 1 ? 'current' : 'unanswered'}`;
                btn.textContent = i;
                btn.onclick = () => loadQuestion(i);
                nav.appendChild(btn);
                
                // Mobile button
                const mobileBtn = document.createElement('div');
                mobileBtn.className = `mobile-question-btn ${i === 1 ? 'current' : 'unanswered'}`;
                mobileBtn.textContent = i;
                mobileBtn.onclick = () => {
                    loadQuestion(i);
                    closeMobileNav();
                };
                
                // Apply styles based on status
                if (i === 1) {
                    mobileBtn.style.backgroundColor = '#dbeafe';
                    mobileBtn.style.color = '#1e40af';
                    mobileBtn.style.borderColor = '#3b82f6';
                } else {
                    mobileBtn.style.backgroundColor = '#f3f4f6';
                    mobileBtn.style.color = '#6b7280';
                    mobileBtn.style.borderColor = '#d1d5db';
                }
                
                mobileGrid.appendChild(mobileBtn);
            }
        }

        function toggleMobileNav() {
            const overlay = document.getElementById('mobileNavOverlay');
            const popup = document.getElementById('mobileNavPopup');
            
            overlay.classList.add('show');
            popup.classList.add('show');
        }

        function closeMobileNav() {
            const overlay = document.getElementById('mobileNavOverlay');
            const popup = document.getElementById('mobileNavPopup');
            
            overlay.classList.remove('show');
            popup.classList.remove('show');
        }

        function loadQuestion(questionNumber) {
            currentQuestion = questionNumber;
            const question = questions[questionNumber - 1];
            
            if (!question) return;
            
            // Update desktop navigation
            document.querySelectorAll('.question-number').forEach((btn, index) => {
                btn.classList.remove('current');
                if (index + 1 === questionNumber) {
                    btn.classList.add('current');
                }
            });
            
            // Update mobile navigation
            document.querySelectorAll('.mobile-question-btn').forEach((btn, index) => {
                btn.classList.remove('current');
                if (index + 1 === questionNumber) {
                    btn.classList.add('current');
                    btn.style.backgroundColor = '#dbeafe';
                    btn.style.color = '#1e40af';
                    btn.style.borderColor = '#3b82f6';
                } else if (answers[index + 1] !== undefined) {
                    btn.style.backgroundColor = '#dcfce7';
                    btn.style.color = '#166534';
                    btn.style.borderColor = '#22c55e';
                } else {
                    btn.style.backgroundColor = '#f3f4f6';
                    btn.style.color = '#6b7280';
                    btn.style.borderColor = '#d1d5db';
                }
            });
            
            // Generate options with mobile-friendly styling
            const optionsHtml = question.options.map((option, index) => `
                <button class="option-button option-button-mobile w-full text-left p-4 rounded-lg bg-white border-2 ${answers[questionNumber] === index ? 'selected' : ''}" 
                        onclick="selectAnswer(${questionNumber}, ${index})">
                    <span class="font-medium text-lg">${String.fromCharCode(65 + index)}.</span> ${option}
                </button>
            `).join('');
            
            // Update question content
            const container = document.getElementById('questionContainer');
            container.innerHTML = `
                <div class="bg-white border border-gray-200 rounded-lg p-4 md:p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg md:text-xl font-semibold text-gray-800">Soal ${questionNumber}</h2>
                        <span class="text-sm text-gray-500">${questionNumber} dari ${totalQuestions}</span>
                    </div>
                    
                    <div class="mb-6">
                        <p class="text-gray-800 leading-relaxed text-base md:text-lg">${question.question}</p>
                    </div>
                    
                    <div class="space-y-3">
                        ${optionsHtml}
                    </div>
                </div>
            `;
            
            // Update current question number (desktop and mobile)
            document.getElementById('currentQuestionNumber').textContent = questionNumber;
            document.getElementById('totalQuestionsDisplay').textContent = totalQuestions;
            
            // Update mobile counters
            const mobileCurrentElement = document.getElementById('currentQuestionNumberMobile');
            const mobileTotalElement = document.getElementById('totalQuestionsDisplayMobile');
            if (mobileCurrentElement) mobileCurrentElement.textContent = questionNumber;
            if (mobileTotalElement) mobileTotalElement.textContent = totalQuestions;
            
            // Update next button text for last question
            updateNextButton();
        }

        function selectAnswer(questionNumber, answer) {
            answers[questionNumber] = answer;
            
            // Update option buttons
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Update navigation button status
            const navBtn = document.querySelectorAll('.question-number')[questionNumber - 1];
            navBtn.classList.remove('unanswered');
            navBtn.classList.add('answered');
            
            updateStats();
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                loadQuestion(currentQuestion - 1);
            }
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                loadQuestion(currentQuestion + 1);
            } else {
                submitExam();
            }
        }

        function updateNextButton() {
            const nextBtn = document.getElementById('nextButton');
            const nextBtnMobile = document.getElementById('nextButtonMobile');
            
            if (currentQuestion === totalQuestions) {
                // Last question - change to finish button
                if (nextBtn) {
                    nextBtn.innerHTML = 'üèÅ Selesai';
                    nextBtn.className = 'flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors';
                }
                if (nextBtnMobile) {
                    nextBtnMobile.innerHTML = '<span class="hidden sm:inline">Selesai</span><i class="fas fa-flag-checkered"></i>';
                    nextBtnMobile.className = 'flex items-center space-x-2 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors';
                }
            } else {
                // Not last question - show next button
                if (nextBtn) {
                    nextBtn.innerHTML = 'Selanjutnya ‚Üí';
                    nextBtn.className = 'flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition-colors';
                }
                if (nextBtnMobile) {
                    nextBtnMobile.innerHTML = '<span class="hidden sm:inline">Selanjutnya</span><i class="fas fa-chevron-right"></i>';
                    nextBtnMobile.className = 'flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition-colors';
                }
            }
        }

        function updateStats() {
            const answeredCount = Object.keys(answers).length;
            document.getElementById('answeredCount').textContent = answeredCount;
            
            // Update mobile counter
            const mobileAnsweredElement = document.getElementById('answeredCountMobile');
            if (mobileAnsweredElement) {
                mobileAnsweredElement.textContent = answeredCount;
            }
        }

        function startTimer() {
            // Clear any existing timer first
            if (timer) {
                clearInterval(timer);
            }
            
            updateTimerDisplay(); // Update immediately
            
            timer = setInterval(() => {
                if (timeRemaining > 0) {
                    timeRemaining--;
                    updateTimerDisplay();
                    
                    if (timeRemaining <= 0) {
                        clearInterval(timer);
                        submitExam();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeRemaining / 3600);
            const minutes = Math.floor((timeRemaining % 3600) / 60);
            const seconds = timeRemaining % 60;
            
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer').textContent = timeString;
        }

        async function submitExam() {
            const result = await Swal.fire({
                icon: 'warning',
                title: 'Konfirmasi Selesai Ujian',
                text: 'Apakah Anda yakin ingin mengakhiri ujian?',
                showCancelButton: true,
                confirmButtonColor: '#dc2626',
                cancelButtonColor: '#6b7280',
                confirmButtonText: '<i class="fas fa-flag-checkered mr-2"></i>Ya, Selesai',
                cancelButtonText: '<i class="fas fa-times mr-2"></i>Batal'
            });
            
            if (!result.isConfirmed) {
                return;
            }
            
            clearInterval(timer);
            
            // Calculate score
            const score = calculateScore();
            
            // Display results
            document.getElementById('finalScore').textContent = score.score;
            document.getElementById('finalCorrect').textContent = score.correct;
            document.getElementById('finalIncorrect').textContent = score.incorrect;
            document.getElementById('finalGrade').textContent = score.grade;
            
            showScreen('resultScreen');
        }

        function calculateScore() {
            let correct = 0;
            let incorrect = 0;
            
            for (let questionNum in answers) {
                const userAnswer = answers[questionNum];
                const question = questions[questionNum - 1];
                
                if (userAnswer === question.correct) {
                    correct++;
                } else {
                    incorrect++;
                }
            }
            
            const score = Math.round((correct / totalQuestions) * 100);
            
            let grade = 'E';
            if (score >= 90) grade = 'A';
            else if (score >= 80) grade = 'B';
            else if (score >= 70) grade = 'C';
            else if (score >= 60) grade = 'D';
            
            return { score, correct, incorrect, grade };
        }

        // Admin Functions
        async function initializeAdminDashboard() {
            console.log('Admin dashboard initialized');
        }

        function showAdminSection(section) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(sec => {
                sec.classList.add('hidden');
            });
            
            // Update navigation buttons - reset all first
            document.querySelectorAll('.admin-nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-100', 'text-blue-800', 'font-medium');
                btn.classList.add('hover:bg-gray-100', 'text-gray-700');
            });
            
            // Show selected section
            const sectionMap = {
                'dashboard': 'adminDashboardSection',
                'students': 'adminStudentsSection',
                'questions': 'adminQuestionsSection',
                'results': 'adminResultsSection'
            };
            
            const targetSection = document.getElementById(sectionMap[section]);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Find and update the clicked button
            const clickedButton = document.querySelector(`[onclick="showAdminSection('${section}')"]`);
            if (clickedButton) {
                clickedButton.classList.remove('hover:bg-gray-100', 'text-gray-700');
                clickedButton.classList.add('bg-blue-100', 'text-blue-800', 'font-medium');
            }
        }

        function showAddStudentModal() {
            alert('Fitur tambah siswa akan segera tersedia!');
        }

        function showAddQuestionModal() {
            alert('Fitur tambah soal akan segera tersedia!');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e64acc25b24097',t:'MTc1Nzc1MjMyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
